generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["views"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admin {
  AdminID              Int                    @id @default(autoincrement())
  barangayNo           Int?
  account              account[]
  barangay             barangay?              @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "admin_ibfk_1")
  archive              archive[]
  certificate_template certificate_template[]
  citizen              citizen[]
  complaints           complaints[]
  fee                  fee[]
  logs                 logs[]
  note                 note[]
  personalinfo         personalinfo[]
  transactions         transactions[]

  @@index([barangayNo], map: "admin_ibfk_1")
}
model archive {
  archiveID    Int      @id @default(autoincrement())
  description String   @db.VarChar(255)
  date        DateTime @db.Date
  file        bytes 
  adminID      Int
  admin        admin    @relation(fields: [adminID], references: [AdminID])
}
model awards {
  awardID    Int       @id @default(autoincrement())
  awardTitle String?   @db.VarChar(255)
  awardLevel String?   @db.VarChar(100)
  barangayNo Int?
  barangay   barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "awards_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model barangay {
  barangayNo           Int                    @id @default(autoincrement())
  BarangayName         String?                @db.VarChar(255)
  Address              String?                @db.VarChar(255)
  Telefax              String?                @db.VarChar(50)
  Email                String?                @db.VarChar(100)
  Website              String?                @db.VarChar(100)
  Icon                 String?                @db.VarChar(255)
  Province             String?                @db.VarChar(100)
  City_municipality    String?                @db.VarChar(100)
  Region               String?                @db.VarChar(100)
  admin                admin[]
  awards               awards[]
  barangayofficial     barangayofficial[]
  business             business[]
  certificate_template certificate_template[]
  citizen              citizen[]
  fiscalinfo           fiscalinfo[]
  household            household[]
  item                 item[]
  physicalinfo         physicalinfo[]
  politicalinfo        politicalinfo[]
  purok                purok[]
  servicevehicles      servicevehicles[]
  socioeconomicinfo    socioeconomicinfo[]
}

model barangayofficial {
  brgyOffID        Int       @id @default(autoincrement())
  barangayNo       Int?
  PunongBarangay   String?   @db.VarChar(100)
  Kagawad1         String?   @db.VarChar(100)
  Kagawad2         String?   @db.VarChar(100)
  Kagawad3         String?   @db.VarChar(100)
  Kagawad4         String?   @db.VarChar(100)
  Kagawad5         String?   @db.VarChar(100)
  Kagawad6         String?   @db.VarChar(100)
  Kagawad7         String?   @db.VarChar(100)
  PangkatSecretary String?   @db.VarChar(100)
  barangay         barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "barangayofficial_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model business {
  businessID          Int             @id @default(autoincrement())
  address             String?         @db.VarChar(255)
  dateOfEstablishment DateTime?       @db.Date
  businessPermitNo    String?         @db.VarChar(100)
  businessOrgForm     String?         @db.VarChar(100)
  contactNo           String?         @db.VarChar(15)
  businessType        String?         @db.VarChar(100)
  businessName        String?         @db.VarChar(255)
  status              String?         @db.VarChar(50)
  purokID             Int?
  barangayNo          Int?
  permitID            Int?
  barangay            barangay?       @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "business_ibfk_1")
  purok               purok?          @relation(fields: [purokID], references: [purokID], onDelete: Cascade, onUpdate: NoAction, map: "business_ibfk_2")
  businesspermit      businesspermit? @relation(fields: [permitID], references: [permitID], onDelete: Cascade, onUpdate: NoAction, map: "business_ibfk_3")
  fee                 fee[]
  note                note[]
  transactions        transactions[]

  @@index([barangayNo], map: "barangayNo")
  @@index([purokID], map: "business_ibfk_2")
  @@index([permitID], map: "business_ibfk_3")
}

model citizen {
  purokID                                              Int?
  citizenID                                            Int            @id @default(autoincrement())
  AdminID                                              Int?
  HouseholdNo                                          Int?
  barangayNo                                           Int?
  account                                              account[]
  admin                                                admin?         @relation(fields: [AdminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "citizen_ibfk_1")
  household                                            household?     @relation(fields: [HouseholdNo], references: [householdNo], onDelete: Cascade, onUpdate: NoAction, map: "citizen_ibfk_2")
  barangay                                             barangay?      @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "citizen_ibfk_3")
  purok                                                purok?         @relation(fields: [purokID], references: [purokID], onDelete: Cascade, onUpdate: NoAction, map: "citizen_ibfk_4")
  complaints_complaints_citizenID_complainantTocitizen complaints[]   @relation("complaints_citizenID_complainantTocitizen")
  complaints_complaints_citizenID_complaineeTocitizen  complaints[]   @relation("complaints_citizenID_complaineeTocitizen")
  fee                                                  fee[]
  logs                                                 logs[]
  note                                                 note[]
  personalinfo                                         personalinfo[]
  transactions                                         transactions[]

  @@index([AdminID], map: "AdminID")
  @@index([HouseholdNo], map: "HouseholdNo")
  @@index([barangayNo], map: "barangayNo")
  @@index([purokID], map: "citizen_ibfk_4")
}

model complaints {
  complaintID                                       Int       @id @default(autoincrement())
  adminID                                           Int?
  citizenID_complainant                             Int?
  citizenID_complainee                              Int?
  date                                              DateTime? @db.Date
  time                                              DateTime? @db.Time(0)
  for                                               String?   @db.VarChar(255)
  actions                                           String?   @db.VarChar(255)
  admin                                             admin?    @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "complaints_ibfk_1")
  citizen_complaints_citizenID_complainantTocitizen citizen?  @relation("complaints_citizenID_complainantTocitizen", fields: [citizenID_complainant], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "complaints_ibfk_2")
  citizen_complaints_citizenID_complaineeTocitizen  citizen?  @relation("complaints_citizenID_complaineeTocitizen", fields: [citizenID_complainee], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "complaints_ibfk_3")

  @@index([adminID], map: "adminID")
  @@index([citizenID_complainant], map: "citizenID_complainant")
  @@index([citizenID_complainee], map: "citizenID_complainee")
}

model fee {
  feeID      Int       @id @default(autoincrement())
  adminID    Int?
  CitizenID  Int?
  Date       DateTime? @db.Date
  Time       DateTime? @db.Time(0)
  amountPaid Decimal?  @db.Decimal(10, 2)
  feetype    String?   @db.VarChar(100)
  businessID Int?
  admin      admin?    @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "fee_ibfk_1")
  citizen    citizen?  @relation(fields: [CitizenID], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "fee_ibfk_2")
  business   business? @relation(fields: [businessID], references: [businessID], onDelete: Cascade, onUpdate: NoAction, map: "fee_ibfk_3")

  @@index([CitizenID], map: "CitizenID")
  @@index([adminID], map: "adminID")
  @@index([businessID], map: "businessID")
}

model fiscalinfo {
  fiscalInfoID Int       @id @default(autoincrement())
  barangayNo   Int?
  income       Decimal?  @db.Decimal(10, 2)
  population   Int?
  year         Int?
  barangay     barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "fiscalinfo_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model household {
  householdNo    Int          @id @default(autoincrement())
  barangayNo     Int?
  householdType  String?      @db.VarChar(50)
  socioEcoStatus String?      @db.VarChar(50)
  totalIncome    Decimal?     @db.Decimal(10, 2)
  citizen        citizen[]
  barangay       barangay?    @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "household_ibfk_1")
  householdinfo  householdinfo[]
  logs           logs[]
  note           note[]
  transactions   transactions[]

  @@index([barangayNo], map: "barangayNo")
}

model householdinfo {
  householdInfoID Int          @id @default(autoincrement())
  householdNo     Int?
  address         String?      @db.VarChar(255)
  noOfMembers     Int?
  noOfHouse       Int?
  noOfRooms       Int?
  ownRent         String?      @db.VarChar(50)
  household       household?   @relation(fields: [householdNo], references: [householdNo], onDelete: Cascade, onUpdate: NoAction, map: "householdinfo_ibfk_1")

  @@index([householdNo], map: "householdNo")
}

model item {
  itemID    Int       @id @default(autoincrement())
  barangayNo Int?
  itemName  String?   @db.VarChar(255)
  itemType  String?   @db.VarChar(255)
  quantity  Int?
  barangay  barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "item_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model logs {
  logID            Int         @id @default(autoincrement())
  adminID          Int?
  citizenID        Int?
  householdNo      Int?
  personalInfoID   Int?
  Date             DateTime?   @db.Date
  Time             DateTime?   @db.Time(0)
  Action           String?     @db.VarChar(255)
  household        household?  @relation(fields: [householdNo], references: [householdNo], onDelete: Cascade, onUpdate: NoAction, map: "logs_ibfk_2")
  personalinfo     personalinfo? @relation(fields: [personalInfoID], references: [personalInfoID], onDelete: Cascade, onUpdate: NoAction, map: "logs_ibfk_3")
  admin            admin?      @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "logs_ibfk_1")
  citizen          citizen?    @relation(fields: [citizenID], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "logs_ibfk_4")

  @@index([adminID], map: "AdminID")
  @@index([citizenID], map: "CitizenID")
  @@index([householdNo], map: "HouseholdNo")
  @@index([personalInfoID], map: "personalInfoID")
}

model note {
  noteID          Int           @id @default(autoincrement())
  adminID         Int?
  businessID      Int?
  CitizenID       Int?
  HouseholdNo     Int?
  personalInfoID  Int?
  Date            DateTime?     @db.Date
  Time            DateTime?     @db.Time(0)
  Description     String?       @db.Text
  admin           admin?        @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "note_ibfk_1")
  business        business?     @relation(fields: [businessID], references: [businessID], onDelete: Cascade, onUpdate: NoAction, map: "note_ibfk_2")
  citizen         citizen?      @relation(fields: [CitizenID], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "note_ibfk_3")
  household       household?    @relation(fields: [HouseholdNo], references: [householdNo], onDelete: Cascade, onUpdate: NoAction, map: "note_ibfk_4")
  personalinfo    personalinfo? @relation(fields: [personalInfoID], references: [personalInfoID], onDelete: Cascade, onUpdate: NoAction, map: "note_ibfk_5")

  @@index([adminID], map: "adminID")
  @@index([businessID], map: "businessID")
  @@index([CitizenID], map: "CitizenID")
  @@index([HouseholdNo], map: "HouseholdNo")
  @@index([personalInfoID], map: "personalInfoID")
}

model personalinfo {
  personalInfoID   Int           @id @default(autoincrement())
  firstname        String?       @db.VarChar(100)
  middleName       String?       @db.VarChar(100)
  lastName         String?       @db.VarChar(100)
  address          String?       @db.VarChar(255)
  residenceType    String?       @db.VarChar(100)
  birthday         DateTime?     @db.Date
  age              Int?
  gender           String?       @db.VarChar(50)
  maritalStatus    String?       @db.VarChar(50)
  bloodtype        String?       @db.VarChar(5)
  occupation       String?       @db.VarChar(100)
  isEmployed       String?       @db.VarChar(50)
  pwdType          String?       @db.VarChar(50)
  education        String?       @db.VarChar(100)
  isEnrolled       String?       @db.VarChar(50)
  isSeniorCitizen  String?       @db.VarChar(50)
  isDeceased       String?       @db.VarChar(50)
  religion         String?       @db.VarChar(100)
  cellNo           String?       @db.VarChar(15)
  telNo            String?       @db.VarChar(15)
  isRegisteredVoter String?       @db.VarChar(50)
  votersID         String?       @db.VarChar(100)
  residencyDate    DateTime?     @db.Date
  AdminID          Int?
  citizenID        Int?
  ProfilePicture   Bytes?        @db.LongBlob
  admin            admin?        @relation(fields: [AdminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "personalinfo_ibfk_1")
  citizen          citizen?      @relation(fields: [citizenID], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "personalinfo_ibfk_2")
  logs             logs[]
  note             note[]

  @@index([AdminID], map: "AdminID")
  @@index([citizenID], map: "citizenID")
}

model physicalinfo {
  physicalInfoID   Int       @id @default(autoincrement())
  barangayNo       Int?
  Location         String?   @db.VarChar(255)
  area             Float?
  boundaries       String?   @db.VarChar(255)
  terrain          String?   @db.VarChar(255)
  climate          String?   @db.VarChar(255)
  infrastructure   String?   @db.VarChar(255)
  barangay         barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "physicalinfo_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model politicalinfo {
  politicalInfoID     Int        @id @default(autoincrement())
  barangayNo          Int?
  PoliticalStatus     String?    @db.VarChar(100)
  PoliticalAffiliation String?    @db.VarChar(100)
  PoliticalLeader     String?    @db.VarChar(100)
  barangay            barangay?  @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "politicalinfo_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model purok {
  purokID      Int        @id @default(autoincrement())
  purokNo      Int?
  purokName    String?    @db.VarChar(255)
  barangayNo   Int?
  barangay     barangay?  @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "purok_ibfk_1")
  citizen      citizen[]
  business     business[]

  @@index([barangayNo], map: "barangayNo")
}

model servicevehicles {
  serviceID    Int       @id @default(autoincrement())
  serviceType  String?   @db.VarChar(100)
  quantity     Int?
  condition    String?   @db.VarChar(50)
  barangayNo   Int?
  barangay     barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "servicevehicles_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model socioeconomicinfo {
  socioInfoID    Int       @id @default(autoincrement())
  barangayNo     Int?
  totalHousehold Int?
  totalPopulation Int?
  totalIncome    Decimal?  @db.Decimal(10, 2)
  literacyRate   Float?
  barangay       barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "socioeconomicinfo_ibfk_1")

  @@index([barangayNo], map: "barangayNo")
}

model transactions {
  transactionID  Int        @id @default(autoincrement())
  adminID        Int?
  CitizenID      Int?
  householdNo    Int?
  businessID     Int?
  transactionType String?   @db.VarChar(100)
  Date           DateTime?  @db.Date
  Time           DateTime?  @db.Time(0)
  Description    String?    @db.Text
  status         String?    @db.VarChar(50)
  amount         Decimal?   @db.Decimal(10, 2)
  admin          admin?     @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "transactions_ibfk_1")
  citizen        citizen?   @relation(fields: [CitizenID], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "transactions_ibfk_2")
  household      household? @relation(fields: [householdNo], references: [householdNo], onDelete: Cascade, onUpdate: NoAction, map: "transactions_ibfk_3")
  business       business?  @relation(fields: [businessID], references: [businessID], onDelete: Cascade, onUpdate: NoAction, map: "transactions_ibfk_4")

  @@index([adminID], map: "adminID")
  @@index([CitizenID], map: "CitizenID")
  @@index([householdNo], map: "householdNo")
  @@index([businessID], map: "businessID")
}

model account {
  accountID  Int       @id @default(autoincrement())
  adminID    Int?
  citizenID  Int?
  username   String?   @db.VarChar(100)
  password   String?   @db.VarChar(100)
  email      String?   @db.VarChar(100)
  contactNo  String?   @db.VarChar(15)
  role       String?   @db.VarChar(50)
  status     String?   @db.VarChar(50)
  admin      admin?    @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "account_ibfk_1")
  citizen    citizen?  @relation(fields: [citizenID], references: [citizenID], onDelete: Cascade, onUpdate: NoAction, map: "account_ibfk_2")

  @@index([adminID], map: "adminID")
  @@index([citizenID], map: "citizenID")
}

model certificate_template {
  templateID       Int       @id @default(autoincrement())
  title            String?   @db.VarChar(255)
  content          String?   @db.Text
  barangayNo       Int?
  adminID          Int?
  barangay         barangay? @relation(fields: [barangayNo], references: [barangayNo], onDelete: Cascade, onUpdate: NoAction, map: "certificate_template_ibfk_1")
  admin            admin?    @relation(fields: [adminID], references: [AdminID], onDelete: Cascade, onUpdate: NoAction, map: "certificate_template_ibfk_2")

  @@index([barangayNo], map: "barangayNo")
  @@index([adminID], map: "adminID")
}

model businesspermit {
  permitID   Int       @id @default(autoincrement())
  permitNumber String?   @db.VarChar(255)
  issueDate  DateTime? @db.Date
  expiryDate DateTime? @db.Date
  business   business[]

  @@index([permitID], map: "permitID")
}
